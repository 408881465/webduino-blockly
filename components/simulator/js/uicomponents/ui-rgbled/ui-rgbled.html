<template id="rgbled">
  <style>
  .rgbled {
    border-radius: 52px;
    border:2px gray solid;
    width: 52px;
    height: 52px;
    background-color: black;
    margin: 52px 0px 0px 52px;
    font-size: 10px;
  }
  </style>
  <div class='rgbled'>
    <br>
    <br>
    <br>
    <br>
    <br>pin:<span id='signalRed'></span>,pin:<span id='signalGreen'></span>,pin:<span id='signalBlue'></span>
  </div>
</template>
<script>
var doc = (document._currentScript || document.currentScript).ownerDocument;
var rgbTemp = doc.querySelector('#rgbled');

customElements.define('ui-rgbled', class extends HTMLElement {
  constructor() {
    super();
    this.root = this.attachShadow({
      mode: 'closed'
    });
    const temp = document.importNode(rgbTemp.content, true);
    this.root.appendChild(temp);
  }

  pin(pinRed, pinGreen, pinBlue) {
    this.root.querySelector("#signalRed").innerHTML = pinRed;
    this.signalRed = pinRed;
    this.root.querySelector("#signalGreen").innerHTML = pinGreen;
    this.signalGreen = pinGreen;
    this.root.querySelector("#signalBlue").innerHTML = pinBlue;
    this.signalBlue = pinBlue;
  }

  intensity(val) {
    var color = "rgb(" + val * 255 + "," + 0 + "," + 0 + ")";
    this.root.querySelector(".led").style.backgroundColor = color;
  }

  rgb(obj) {
    console.log("obj", obj);
    var ele = this.root.querySelector(".rgbled");
    if (ele.color == undefined) {
      ele.color = {
        red: 0,
        green: 0,
        blue: 0
      };
    }
    ele.color[obj.color] = obj.intensity;
    var color = "rgb(" + parseInt((1 - ele.color.red) * 255) + "," + parseInt((1 - ele.color.green) * 255) + "," + parseInt((1 - ele.color.blue) * 255) + ")";
    ele.style.backgroundColor = color;
  }
});
</script>